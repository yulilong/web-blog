<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack教程 | 前端知识</title>
    <meta name="description" content="一个总结前端知识的文档网站">
    <link rel="icon" href="/logo.png">
  <script defer="defer" src="/static/jquery.slim.min.js"></script>
  <script defer="defer" src="/static/jquery.fancybox.min.js"></script>
  <link defer="defer" rel="stylesheet" type="text/css" href="/static/jquery.fancybox.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.f853b4b7.css" as="style"><link rel="preload" href="/assets/js/app.d18e3cd8.js" as="script"><link rel="preload" href="/assets/js/170.5ad0f0fe.js" as="script"><link rel="prefetch" href="/assets/js/10.3c978b5a.js"><link rel="prefetch" href="/assets/js/100.9b8f41c4.js"><link rel="prefetch" href="/assets/js/101.dcb14acc.js"><link rel="prefetch" href="/assets/js/102.2a82642e.js"><link rel="prefetch" href="/assets/js/103.55c75880.js"><link rel="prefetch" href="/assets/js/104.a5152a18.js"><link rel="prefetch" href="/assets/js/105.9375539d.js"><link rel="prefetch" href="/assets/js/106.d9f1826b.js"><link rel="prefetch" href="/assets/js/107.d5c5c1f8.js"><link rel="prefetch" href="/assets/js/108.d8593f40.js"><link rel="prefetch" href="/assets/js/109.30a5fddb.js"><link rel="prefetch" href="/assets/js/11.6ab74784.js"><link rel="prefetch" href="/assets/js/110.03c611c8.js"><link rel="prefetch" href="/assets/js/111.fc7ca03e.js"><link rel="prefetch" href="/assets/js/112.367cdd66.js"><link rel="prefetch" href="/assets/js/113.cf7bb4e5.js"><link rel="prefetch" href="/assets/js/114.f57ec866.js"><link rel="prefetch" href="/assets/js/115.fe4cb724.js"><link rel="prefetch" href="/assets/js/116.36ab89d2.js"><link rel="prefetch" href="/assets/js/117.339e33c1.js"><link rel="prefetch" href="/assets/js/118.ea4fdf1f.js"><link rel="prefetch" href="/assets/js/119.2f5e7ad5.js"><link rel="prefetch" href="/assets/js/12.4cec9bb8.js"><link rel="prefetch" href="/assets/js/120.d0b6a627.js"><link rel="prefetch" href="/assets/js/121.4db5f204.js"><link rel="prefetch" href="/assets/js/122.7e8b2e37.js"><link rel="prefetch" href="/assets/js/123.8207072c.js"><link rel="prefetch" href="/assets/js/124.fb8492d2.js"><link rel="prefetch" href="/assets/js/125.14a7b753.js"><link rel="prefetch" href="/assets/js/126.083ab1b8.js"><link rel="prefetch" href="/assets/js/127.ab9e679e.js"><link rel="prefetch" href="/assets/js/128.cc5820bf.js"><link rel="prefetch" href="/assets/js/129.02bea52d.js"><link rel="prefetch" href="/assets/js/13.e972d6f5.js"><link rel="prefetch" href="/assets/js/130.f8ffe2f4.js"><link rel="prefetch" href="/assets/js/131.3c0af687.js"><link rel="prefetch" href="/assets/js/132.aa179cb6.js"><link rel="prefetch" href="/assets/js/133.cc1c8185.js"><link rel="prefetch" href="/assets/js/134.ecc94f2e.js"><link rel="prefetch" href="/assets/js/135.1675c120.js"><link rel="prefetch" href="/assets/js/136.9bb8c110.js"><link rel="prefetch" href="/assets/js/137.9a695475.js"><link rel="prefetch" href="/assets/js/138.5c1831e3.js"><link rel="prefetch" href="/assets/js/139.0a1a42fc.js"><link rel="prefetch" href="/assets/js/14.9ecf3cc3.js"><link rel="prefetch" href="/assets/js/140.3be7077d.js"><link rel="prefetch" href="/assets/js/141.28f54311.js"><link rel="prefetch" href="/assets/js/142.0f732a49.js"><link rel="prefetch" href="/assets/js/143.f881196c.js"><link rel="prefetch" href="/assets/js/144.316091b1.js"><link rel="prefetch" href="/assets/js/145.cadf2477.js"><link rel="prefetch" href="/assets/js/146.5466844b.js"><link rel="prefetch" href="/assets/js/147.7cc8ecd4.js"><link rel="prefetch" href="/assets/js/148.0c7096b4.js"><link rel="prefetch" href="/assets/js/149.b7d0671e.js"><link rel="prefetch" href="/assets/js/15.3282e7bc.js"><link rel="prefetch" href="/assets/js/150.a47e1f20.js"><link rel="prefetch" href="/assets/js/151.36e1b50a.js"><link rel="prefetch" href="/assets/js/152.5d96ea9a.js"><link rel="prefetch" href="/assets/js/153.cc3adca1.js"><link rel="prefetch" href="/assets/js/154.687485c7.js"><link rel="prefetch" href="/assets/js/155.2ea2cbe9.js"><link rel="prefetch" href="/assets/js/156.63062ccb.js"><link rel="prefetch" href="/assets/js/157.755c1908.js"><link rel="prefetch" href="/assets/js/158.40a62d85.js"><link rel="prefetch" href="/assets/js/159.cdfe4c43.js"><link rel="prefetch" href="/assets/js/16.244bcfa5.js"><link rel="prefetch" href="/assets/js/160.68062187.js"><link rel="prefetch" href="/assets/js/161.777109f1.js"><link rel="prefetch" href="/assets/js/162.2b93ef1f.js"><link rel="prefetch" href="/assets/js/163.da08cb7d.js"><link rel="prefetch" href="/assets/js/164.db62a311.js"><link rel="prefetch" href="/assets/js/165.9612d1f6.js"><link rel="prefetch" href="/assets/js/166.5960d960.js"><link rel="prefetch" href="/assets/js/167.2f617057.js"><link rel="prefetch" href="/assets/js/168.771d586a.js"><link rel="prefetch" href="/assets/js/169.87844344.js"><link rel="prefetch" href="/assets/js/17.00bdfaf3.js"><link rel="prefetch" href="/assets/js/171.22786ba3.js"><link rel="prefetch" href="/assets/js/172.49e5451f.js"><link rel="prefetch" href="/assets/js/173.7462313e.js"><link rel="prefetch" href="/assets/js/174.54b4d11a.js"><link rel="prefetch" href="/assets/js/175.864a2fa0.js"><link rel="prefetch" href="/assets/js/176.be990953.js"><link rel="prefetch" href="/assets/js/177.c8d7cc4b.js"><link rel="prefetch" href="/assets/js/178.ad23f326.js"><link rel="prefetch" href="/assets/js/179.a3371a0b.js"><link rel="prefetch" href="/assets/js/18.08f61532.js"><link rel="prefetch" href="/assets/js/180.5f048298.js"><link rel="prefetch" href="/assets/js/181.7067dd7e.js"><link rel="prefetch" href="/assets/js/182.bf312b74.js"><link rel="prefetch" href="/assets/js/183.a89af512.js"><link rel="prefetch" href="/assets/js/19.242fcc4c.js"><link rel="prefetch" href="/assets/js/20.d4eaf7fd.js"><link rel="prefetch" href="/assets/js/21.f10b82b9.js"><link rel="prefetch" href="/assets/js/22.396ecbe9.js"><link rel="prefetch" href="/assets/js/23.2a295290.js"><link rel="prefetch" href="/assets/js/24.e3566310.js"><link rel="prefetch" href="/assets/js/25.46b7f0f7.js"><link rel="prefetch" href="/assets/js/26.12012ffc.js"><link rel="prefetch" href="/assets/js/27.b93a3bc5.js"><link rel="prefetch" href="/assets/js/28.3ea2eb49.js"><link rel="prefetch" href="/assets/js/29.00cbeabe.js"><link rel="prefetch" href="/assets/js/3.b6ed6d58.js"><link rel="prefetch" href="/assets/js/30.a7935a4d.js"><link rel="prefetch" href="/assets/js/31.6d248f8a.js"><link rel="prefetch" href="/assets/js/32.f9afe09b.js"><link rel="prefetch" href="/assets/js/33.939c22ed.js"><link rel="prefetch" href="/assets/js/34.a464644d.js"><link rel="prefetch" href="/assets/js/35.e0524ba3.js"><link rel="prefetch" href="/assets/js/36.5688d8bd.js"><link rel="prefetch" href="/assets/js/37.7896942a.js"><link rel="prefetch" href="/assets/js/38.253f4230.js"><link rel="prefetch" href="/assets/js/39.9918fed7.js"><link rel="prefetch" href="/assets/js/4.8438802a.js"><link rel="prefetch" href="/assets/js/40.1d42dfef.js"><link rel="prefetch" href="/assets/js/41.76b0c57f.js"><link rel="prefetch" href="/assets/js/42.e52038b9.js"><link rel="prefetch" href="/assets/js/43.fc6145a7.js"><link rel="prefetch" href="/assets/js/44.ed10f39c.js"><link rel="prefetch" href="/assets/js/45.f9f0d3ba.js"><link rel="prefetch" href="/assets/js/46.f7837284.js"><link rel="prefetch" href="/assets/js/47.669d5c62.js"><link rel="prefetch" href="/assets/js/48.88990bb5.js"><link rel="prefetch" href="/assets/js/49.eedc9b6d.js"><link rel="prefetch" href="/assets/js/5.4b3327ea.js"><link rel="prefetch" href="/assets/js/50.38863926.js"><link rel="prefetch" href="/assets/js/51.5a4009b9.js"><link rel="prefetch" href="/assets/js/52.53824857.js"><link rel="prefetch" href="/assets/js/53.fed8ed8c.js"><link rel="prefetch" href="/assets/js/54.2828e1eb.js"><link rel="prefetch" href="/assets/js/55.15a29884.js"><link rel="prefetch" href="/assets/js/56.a1e8dd20.js"><link rel="prefetch" href="/assets/js/57.a193beae.js"><link rel="prefetch" href="/assets/js/58.a35586fc.js"><link rel="prefetch" href="/assets/js/59.298e7a30.js"><link rel="prefetch" href="/assets/js/6.8f8061d5.js"><link rel="prefetch" href="/assets/js/60.309949d3.js"><link rel="prefetch" href="/assets/js/61.5b2438a2.js"><link rel="prefetch" href="/assets/js/62.0b6fc5ab.js"><link rel="prefetch" href="/assets/js/63.9e907533.js"><link rel="prefetch" href="/assets/js/64.cf2f109e.js"><link rel="prefetch" href="/assets/js/65.2e76882c.js"><link rel="prefetch" href="/assets/js/66.1e168f9f.js"><link rel="prefetch" href="/assets/js/67.b8fa7712.js"><link rel="prefetch" href="/assets/js/68.40717004.js"><link rel="prefetch" href="/assets/js/69.54334dfe.js"><link rel="prefetch" href="/assets/js/7.d1c694a0.js"><link rel="prefetch" href="/assets/js/70.e98d0df3.js"><link rel="prefetch" href="/assets/js/71.e6e23663.js"><link rel="prefetch" href="/assets/js/72.72ec9dd5.js"><link rel="prefetch" href="/assets/js/73.c573567c.js"><link rel="prefetch" href="/assets/js/74.e6428ff0.js"><link rel="prefetch" href="/assets/js/75.49650c1b.js"><link rel="prefetch" href="/assets/js/76.810190c5.js"><link rel="prefetch" href="/assets/js/77.4316f3d1.js"><link rel="prefetch" href="/assets/js/78.41e6fcb1.js"><link rel="prefetch" href="/assets/js/79.d90102bc.js"><link rel="prefetch" href="/assets/js/8.c1134aff.js"><link rel="prefetch" href="/assets/js/80.67f442b0.js"><link rel="prefetch" href="/assets/js/81.58cd2086.js"><link rel="prefetch" href="/assets/js/82.0af25307.js"><link rel="prefetch" href="/assets/js/83.57cb0313.js"><link rel="prefetch" href="/assets/js/84.7c4c1b25.js"><link rel="prefetch" href="/assets/js/85.f07b510a.js"><link rel="prefetch" href="/assets/js/86.3252a34b.js"><link rel="prefetch" href="/assets/js/87.32c33b26.js"><link rel="prefetch" href="/assets/js/88.1a13f763.js"><link rel="prefetch" href="/assets/js/89.ce95ef88.js"><link rel="prefetch" href="/assets/js/9.cc043a67.js"><link rel="prefetch" href="/assets/js/90.4900a855.js"><link rel="prefetch" href="/assets/js/91.db19c502.js"><link rel="prefetch" href="/assets/js/92.cadb5507.js"><link rel="prefetch" href="/assets/js/93.59c3b44d.js"><link rel="prefetch" href="/assets/js/94.0c53fb42.js"><link rel="prefetch" href="/assets/js/95.69e14251.js"><link rel="prefetch" href="/assets/js/96.abcd14db.js"><link rel="prefetch" href="/assets/js/97.219ac966.js"><link rel="prefetch" href="/assets/js/98.c7176d4a.js"><link rel="prefetch" href="/assets/js/99.6bee146d.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f48d90bd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f853b4b7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="前端知识" class="logo"> <span class="site-name can-hide">前端知识</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/catalog.html" class="nav-link">目录</a></div><div class="nav-item"><a href="/doc/es6/" class="nav-link">ES6</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">javascript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/js/" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/doc/js/standardLibrary/" class="nav-link">js标准库</a></li><li class="dropdown-item"><!----> <a href="/doc/dom/" class="nav-link">dom操作文档</a></li><li class="dropdown-item"><!----> <a href="/doc/browserNetwork/" class="nav-link">浏览器、网络</a></li><li class="dropdown-item"><!----> <a href="/doc/designPattern/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><a href="/doc/css/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/doc/html/" class="nav-link">html</a></div><div class="nav-item"><a href="/doc/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/doc/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/doc/node/" class="nav-link">node</a></div><div class="nav-item"><a href="/doc/tool/" class="nav-link router-link-active">工具</a></div> <a href="https://github.com/yulilong/front-end-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/catalog.html" class="nav-link">目录</a></div><div class="nav-item"><a href="/doc/es6/" class="nav-link">ES6</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">javascript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/js/" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/doc/js/standardLibrary/" class="nav-link">js标准库</a></li><li class="dropdown-item"><!----> <a href="/doc/dom/" class="nav-link">dom操作文档</a></li><li class="dropdown-item"><!----> <a href="/doc/browserNetwork/" class="nav-link">浏览器、网络</a></li><li class="dropdown-item"><!----> <a href="/doc/designPattern/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><a href="/doc/css/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/doc/html/" class="nav-link">html</a></div><div class="nav-item"><a href="/doc/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/doc/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/doc/node/" class="nav-link">node</a></div><div class="nav-item"><a href="/doc/tool/" class="nav-link router-link-active">工具</a></div> <a href="https://github.com/yulilong/front-end-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/doc/tool/001-webpack教程.html" class="one-level one-level-active active sidebar-link">webpack教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_1-webpack介绍" class="sidebar-link">1. webpack介绍</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_2-entry-入口-、output-出口" class="sidebar-link">2. entry(入口)、output(出口)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_2-1-单个入口、出口写法" class="sidebar-link">2.1 单个入口、出口写法</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_2-1-多个入口、出口写法" class="sidebar-link">2.1 多个入口、出口写法</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_3-loader" class="sidebar-link">3. loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_3-1-使用示例" class="sidebar-link">3.1 使用示例</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_3-2-使用loader的三种方式：配置、内联、cli" class="sidebar-link">3.2 使用loader的三种方式：配置、内联、CLI</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_3-3-loader特性" class="sidebar-link">3.3 loader特性</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_3-4-解析loader" class="sidebar-link">3.4 解析loader</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_4-插件-plugins" class="sidebar-link">4. 插件(Plugins)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_4-1-剖析" class="sidebar-link">4.1 剖析</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_4-2-用法" class="sidebar-link">4.2 用法</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_4-3-配置" class="sidebar-link">4.3 配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_5-配置-configuration" class="sidebar-link">5. 配置(configuration)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_5-1-基本配置" class="sidebar-link">5.1 基本配置</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_5-2-导出多个配置" class="sidebar-link">5.2 导出多个配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#webpack-中引入jquery插件" class="sidebar-link">webpack 中引入jQuery插件</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#一些常用的插件plugins" class="sidebar-link">一些常用的插件plugins</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_1-cleanwebpackplugin：清理文件插件" class="sidebar-link">1. CleanWebpackPlugin：清理文件插件</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_2-复制静态文件到打包目录：copy-webpack-plugin" class="sidebar-link">2. 复制静态文件到打包目录：Copy Webpack Plugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#webpack一些用法" class="sidebar-link">webpack一些用法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_1-设置环境变量区分生产环境和开发环境process-env-node-env" class="sidebar-link">1. 设置环境变量区分生产环境和开发环境process.env.NODE_ENV</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_2-在webpack中配置mock，访问的api地址在webpack中过滤，使用假数据" class="sidebar-link">2. 在webpack中配置mock，访问的API地址在webpack中过滤，使用假数据</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_3-webpack本地开发配置api代理解决跨域问题" class="sidebar-link">3. webpack本地开发配置API代理解决跨域问题</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_4-import或require时设置路径别名简化引入路径" class="sidebar-link">4. import或require时设置路径别名简化引入路径</a></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#_5-生成的html压缩，删除空格" class="sidebar-link">5.  生成的HTML压缩，删除空格</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/tool/001-webpack教程.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/doc/tool/002-webpack-require.context.html" class="one-level sidebar-link">require.context方法讲解</a></li><li><a href="/doc/tool/003-Moment日期处理类库.html" class="one-level sidebar-link">Moment日期处理类库</a></li><li><a href="/doc/tool/004-prettier代码格式化工具.html" class="one-level sidebar-link">Prettier代码格式化工具介绍</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="webpack教程"><a href="#webpack教程" aria-hidden="true" class="header-anchor">#</a> webpack教程</h1> <h2 id="_1-webpack介绍"><a href="#_1-webpack介绍" aria-hidden="true" class="header-anchor">#</a> 1. webpack介绍</h2> <p>本质上，<em>webpack</em> 是一个现代 JavaScript 应用程序的<em>静态模块打包器(module bundler)</em>。当 webpack 处理应用程序时，它会递归地构建一个<em>依赖关系图(dependency graph)</em>，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 <em>bundle</em>。</p> <p>从webpack V4.0.0开始，可以不用引入一个配置文件，而webpack还是高度可配置的。</p> <p>webpack的四个核心概念：</p> <table><thead><tr><th>概念</th> <th>作用</th></tr></thead> <tbody><tr><td>入口(entry)</td> <td>指示 webpack 应该使用哪个模块，来作为构建其内部<em>依赖图</em>的开始</td></tr> <tr><td>输出(output)</td> <td>告诉 webpack 在哪里输出它所创建的 <em>bundles</em>，以及如何命名这些文件</td></tr> <tr><td>loader</td> <td>让 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）</td></tr> <tr><td>插件(plugins)</td> <td>执行范围更广的任务。插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量</td></tr></tbody></table> <p>一个简单的示例： 把编写的的代码转化为浏览器可以理解JS代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/index.js</span>
<span class="token keyword">import</span> bar <span class="token keyword">from</span> <span class="token string">'./bar'</span><span class="token punctuation">;</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// src/bar.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js 通过这个配置文件，执行后，可以生成浏览器理解的JS代码</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// page.html</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;dist/bundle.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_2-entry-入口-、output-出口"><a href="#_2-entry-入口-、output-出口" aria-hidden="true" class="header-anchor">#</a> 2. entry(入口)、output(出口)</h2> <h3 id="_2-1-单个入口、出口写法"><a href="#_2-1-单个入口、出口写法" aria-hidden="true" class="header-anchor">#</a> 2.1 单个入口、出口写法</h3> <ul><li><p>单个入口写法</p> <p>用法：<code>entry: string|Array&lt;string&gt;</code></p></li> <li><p>单个出口写法</p> <p>配置 <code>output</code> 属性的最低要求是，将它的值设置为一个对象，包括以下两点：</p> <ol><li><code>filename</code>: 用于输出的文件名</li> <li><code>path</code>: 目标输出路径，绝对路径，也可以使用<code>path</code>模块来生成绝对路径</li></ol></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 入口</span>
    entry<span class="token punctuation">:</span> <span class="token string">'./path/to/my/entry/file.js'</span><span class="token punctuation">,</span>
    <span class="token comment">// 出口</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span> filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
       <span class="token comment">// path: '/home/proj/public/assets'</span>
       path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../dist/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-1-多个入口、出口写法"><a href="#_2-1-多个入口、出口写法" aria-hidden="true" class="header-anchor">#</a> 2.1 多个入口、出口写法</h3> <ul><li><p>多个入口写法</p> <p>多个入口使用对象语法，用法：<code>entry: {[entryChunkName: string]: string|Array&lt;string&gt;}</code></p></li> <li><p>多个出口写法</p> <p>如果配置了多个入口，则应该使用<a href="https://doc.webpack-china.org/configuration/output#output-filename" target="_blank" rel="noopener noreferrer">占位符(substitutions)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来确保每个文件具有唯一的名称。</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
    search<span class="token punctuation">:</span> <span class="token string">'./src/search.js'</span><span class="token punctuation">,</span>
    pageOne<span class="token punctuation">:</span> <span class="token string">'./src/pageOne/index.js'</span><span class="token punctuation">,</span>
    pageTwo<span class="token punctuation">:</span> <span class="token string">'./src/pageTwo/index.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/dist'</span> <span class="token comment">// __dirname 获取当前路径的绝对路径</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-loader"><a href="#_3-loader" aria-hidden="true" class="header-anchor">#</a> 3. loader</h2> <p>loader 用于对模块的源代码进行转换。loader 可以使你在 <code>import</code> 或&quot;加载&quot;模块时预处理文件。</p> <p>loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript，或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 <code>import</code> CSS文件！</p> <h3 id="_3-1-使用示例"><a href="#_3-1-使用示例" aria-hidden="true" class="header-anchor">#</a> 3.1 使用示例</h3> <p>如：让webpack加载CSS文件，或将TypeScript 转为 JavaScript。</p> <p>首相安装相对应的loader：</p> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev css-loader
npm install --save-dev ts-loader
</code></pre></div><p>然后在配置文件<code>webpack.config.js</code>中配置，让webpack对每个<code>.css</code>使用<code>css-loader</code>,对所有<code>.ts</code>文件使用<code>ts-loader</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.ts$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-2-使用loader的三种方式：配置、内联、cli"><a href="#_3-2-使用loader的三种方式：配置、内联、cli" aria-hidden="true" class="header-anchor">#</a> 3.2 使用loader的三种方式：配置、内联、CLI</h3> <h4 id="_3-2-1-配置文件中配置"><a href="#_3-2-1-配置文件中配置" aria-hidden="true" class="header-anchor">#</a> 3.2.1 配置文件中配置</h4> <p><a href="https://doc.webpack-china.org/configuration/module/#module-rules" target="_blank" rel="noopener noreferrer"><code>module.rules</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 允许你在 webpack 配置中指定多个 loader。 这是展示 loader 的一种简明方式，并且有助于使代码变得简洁。同时让你对各个 loader 有个全局概览：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
          <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span> modules<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'raw-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-2-2-内联：代码import语句后面使用"><a href="#_3-2-2-内联：代码import语句后面使用" aria-hidden="true" class="header-anchor">#</a> 3.2.2 内联：代码import语句后面使用</h4> <p>可以在 <code>import</code> 语句或任何<a href="https://doc.webpack-china.org/api/module-methods" target="_blank" rel="noopener noreferrer">等效于 &quot;import&quot; 的方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中指定 loader。使用 <code>!</code> 将资源中的 loader 分开。分开的每个部分都相对于当前目录解析。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">'style-loader!css-loader?modules!./styles.css'</span><span class="token punctuation">;</span>
</code></pre></div><p>通过前置所有规则及使用 <code>!</code>，可以对应覆盖到配置中的任意 loader。</p> <p>选项可以传递查询参数，例如 <code>?key=value&amp;foo=bar</code>，或者一个 JSON 对象，例如 <code>?{&quot;key&quot;:&quot;value&quot;,&quot;foo&quot;:&quot;bar&quot;}</code>。</p> <h4 id="_3-2-3-cli-命令行中配置"><a href="#_3-2-3-cli-命令行中配置" aria-hidden="true" class="header-anchor">#</a> 3.2.3 CLI:命令行中配置</h4> <div class="language- extra-class"><pre class="language-text"><code>webpack --module-bind jade-loader --module-bind 'css=style-loader!css-loader'
</code></pre></div><p>这会对 <code>.jade</code> 文件使用 <code>jade-loader</code>，对 <code>.css</code> 文件使用 <a href="https://doc.webpack-china.org/loaders/style-loader" target="_blank" rel="noopener noreferrer"><code>style-loader</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://doc.webpack-china.org/loaders/css-loader" target="_blank" rel="noopener noreferrer"><code>css-loader</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="_3-3-loader特性"><a href="#_3-3-loader特性" aria-hidden="true" class="header-anchor">#</a> 3.3 loader特性</h3> <ul><li>loader 支持链式传递。能够对资源使用流水线(pipeline)。一组链式的 loader 将按照相反的顺序执行。loader 链中的第一个 loader 返回值给下一个 loader。在最后一个 loader，返回 webpack 所预期的 JavaScript。</li> <li>loader 可以是同步的，也可以是异步的。</li> <li>loader 运行在 Node.js 中，并且能够执行任何可能的操作。</li> <li>loader 接收查询参数。用于对 loader 传递配置。</li> <li>loader 也能够使用 <code>options</code> 对象进行配置。</li> <li>除了使用 <code>package.json</code> 常见的 <code>main</code> 属性，还可以将普通的 npm 模块导出为 loader，做法是在 <code>package.json</code> 里定义一个 <code>loader</code> 字段。</li> <li>插件(plugin)可以为 loader 带来更多特性。</li> <li>loader 能够产生额外的任意文件。</li></ul> <p>loader 通过（loader）预处理函数，为 JavaScript 生态系统提供了更多能力。 用户现在可以更加灵活地引入细粒度逻辑，例如压缩、打包、语言翻译和<a href="https://doc.webpack-china.org/loaders" target="_blank" rel="noopener noreferrer">其他更多<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="_3-4-解析loader"><a href="#_3-4-解析loader" aria-hidden="true" class="header-anchor">#</a> 3.4 解析loader</h3> <p>loader 遵循标准的<a href="https://doc.webpack-china.org/concepts/module-resolution/" target="_blank" rel="noopener noreferrer">模块解析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。多数情况下，loader 将从<a href="https://doc.webpack-china.org/concepts/module-resolution/#module-paths" target="_blank" rel="noopener noreferrer">模块路径<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>（通常将模块路径认为是 <code>npm install</code>, <code>node_modules</code>）解析。</p> <p>loader 模块需要导出为一个函数，并且使用 Node.js 兼容的 JavaScript 编写。通常使用 npm 进行管理，但是也可以将自定义 loader 作为应用程序中的文件。按照约定，loader 通常被命名为 <code>xxx-loader</code>（例如 <code>json-loader</code>）。有关详细信息，请查看<a href="https://doc.webpack-china.org/development/how-to-write-a-loader" target="_blank" rel="noopener noreferrer">如何编写 loader？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="_4-插件-plugins"><a href="#_4-插件-plugins" aria-hidden="true" class="header-anchor">#</a> 4. 插件(Plugins)</h2> <p>插件是 wepback 的<a href="https://github.com/webpack/tapable" target="_blank" rel="noopener noreferrer">支柱<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>功能。webpack 自身也是构建于，你在 webpack 配置中用到的<strong>相同的插件系统</strong>之上！</p> <p>插件目的在于解决 <a href="https://webpack.docschina.org/concepts/loaders" target="_blank" rel="noopener noreferrer">loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 无法实现的<strong>其他事</strong>。</p> <h3 id="_4-1-剖析"><a href="#_4-1-剖析" aria-hidden="true" class="header-anchor">#</a> 4.1 剖析</h3> <p>webpack <strong>插件</strong>是一个具有 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener noreferrer"><code>apply</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 属性的 JavaScript 对象。<code>apply</code> 属性会被 webpack compiler 调用，并且 compiler 对象可在<strong>整个</strong>编译生命周期访问。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ConsoleLogOnBuildWebpackPlugin.js</span>
<span class="token keyword">const</span> pluginName <span class="token operator">=</span> <span class="token string">'ConsoleLogOnBuildWebpackPlugin'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ConsoleLogOnBuildWebpackPlugin</span> <span class="token punctuation">{</span>
    <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>pluginName<span class="token punctuation">,</span> compilation <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;webpack 构建过程开始！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>tap方法的第一个参数，是驼峰式命名的插件名称。建议为此使用一个常量，以便它可以在所有 hook 中复用。</p> <h3 id="_4-2-用法"><a href="#_4-2-用法" aria-hidden="true" class="header-anchor">#</a> 4.2 用法</h3> <p>由于<strong>插件</strong>可以携带参数/选项，你必须在 webpack 配置中，向 <code>plugins</code> 属性传入 <code>new</code> 实例。</p> <p>根据你的 webpack 用法，这里有多种方式使用插件。</p> <h3 id="_4-3-配置"><a href="#_4-3-配置" aria-hidden="true" class="header-anchor">#</a> 4.3 配置</h3> <p><strong>webpack.config.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通过 npm 安装</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//访问内置的插件</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./path/to/my/entry/file.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'my-first-webpack.bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.(js|jsx)$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>template<span class="token punctuation">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><h2 id="_5-配置-configuration"><a href="#_5-配置-configuration" aria-hidden="true" class="header-anchor">#</a> 5. 配置(configuration)</h2> <p>**webpack 的配置文件，是导出一个对象的 JavaScript 文件。**此对象，由 webpack 根据对象定义的属性进行解析。</p> <p>因为 webpack 配置是标准的 Node.js CommonJS 模块，你<strong>可以做到以下事情</strong>：</p> <ul><li>通过 <code>require(...)</code> 导入其他文件</li> <li>通过 <code>require(...)</code> 使用 npm 的工具函数</li> <li>使用 JavaScript 控制流表达式，例如 <code>?:</code> 操作符</li> <li>对常用值使用常量或变量</li> <li>编写并执行函数来生成部分配置</li></ul> <p>请在合适的时机使用这些特性。</p> <p>虽然技术上可行，<strong>但应避免以下做法</strong>：</p> <ul><li>在使用 webpack 命令行接口(CLI)（应该编写自己的命令行接口(CLI)，或<a href="https://webpack.docschina.org/configuration/configuration-types/" target="_blank" rel="noopener noreferrer">使用 <code>--env</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）时，访问命令行接口(CLI)参数</li> <li>导出不确定的值（调用 webpack 两次应该产生同样的输出文件）</li> <li>编写很长的配置（应该将配置拆分为多个文件）</li></ul> <h3 id="_5-1-基本配置"><a href="#_5-1-基本配置" aria-hidden="true" class="header-anchor">#</a> 5.1 基本配置</h3> <p><strong>webpack.config.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./foo.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'foo.bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-2-导出多个配置"><a href="#_5-2-导出多个配置" aria-hidden="true" class="header-anchor">#</a> 5.2 导出多个配置</h3> <h4 id="_5-2-1-导出为一个函数"><a href="#_5-2-1-导出为一个函数" aria-hidden="true" class="header-anchor">#</a> 5.2.1 导出为一个函数</h4> <p>在开发和生产构建之间，消除 <code>webpack.config.js</code> 的差异。（至少）有两种选项：</p> <p>明天继续：</p> <p>https://webpack.docschina.org/configuration/configuration-types/#exporting-multiple-configurations</p> <p>该写插件了：</p> <p>https://doc.webpack-china.org/concepts/plugins/</p> <h2 id="webpack-中引入jquery插件"><a href="#webpack-中引入jquery插件" aria-hidden="true" class="header-anchor">#</a> webpack 中引入jQuery插件</h2> <ol><li><p>在项目中添加jQuery依赖：<code>npm install jquery --save-dev</code></p></li> <li><p>在webpack配置文件的插件中添加如下代码：</p> <div class="language- extra-class"><pre class="language-text"><code>plugins: [
        new webpack.ProvidePlugin({ 
            $:&quot;jquery&quot;, 
            jQuery:&quot;jquery&quot;, 
            &quot;window.jQuery&quot;:&quot;jquery&quot; 
        })
    ]
</code></pre></div></li> <li><p>直接在JS代码中使用：<code>var $ct = $(&quot;.img-ct&quot;);</code></p></li></ol> <p>参考链接： https://yq.aliyun.com/ziliao/138017</p> <h2 id="一些常用的插件plugins"><a href="#一些常用的插件plugins" aria-hidden="true" class="header-anchor">#</a> 一些常用的插件plugins</h2> <h3 id="_1-cleanwebpackplugin：清理文件插件"><a href="#_1-cleanwebpackplugin：清理文件插件" aria-hidden="true" class="header-anchor">#</a> 1. CleanWebpackPlugin：清理文件插件</h3> <p>这个插件主要用来清理打包的文件的，在项目打包前，把之前打包的文件清理掉</p> <p>安装： <code>npm install clean-webpack-plugin --save-dev</code></p> <p>配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 配置文件位置： config/webpack.config.prod.js</span>
<span class="token comment">// 要清理的文件在dist目录下</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token comment">// 自动清理dist目录, root: process.cwd()不能少，否则不能清理</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span>
            <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../dist/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>root<span class="token punctuation">:</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>清理插件遇到的错误：<code>dist is outside of the project root. Skipping...</code>:</p> <p>https://github.com/johnagan/clean-webpack-plugin/issues/10</p> <h3 id="_2-复制静态文件到打包目录：copy-webpack-plugin"><a href="#_2-复制静态文件到打包目录：copy-webpack-plugin" aria-hidden="true" class="header-anchor">#</a> 2. 复制静态文件到打包目录：Copy Webpack Plugin</h3> <p>安装：</p> <div class="language- extra-class"><pre class="language-text"><code>npm i -D copy-webpack-plugin
</code></pre></div><p>用法，在webpack配置文件中：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;copy-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 复制静态资源到打包目录</span>
<span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//因为自己改变了文件的路径，这里需要重新处理一下</span>
    <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;..&quot;</span><span class="token punctuation">,</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;./static&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            to<span class="token punctuation">:</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;./dist/static&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>插件的参数：</p> <div class="language- extra-class"><pre class="language-text"><code>from    定义要拷贝的源目录           from: __dirname + ‘/src/public’
to      定义要拷贝到的目标目录     from: __dirname + ‘/dist’
toType  file 或者 dir         可选，默认是文件
force   强制覆盖先前的插件           可选 默认false
context                         可选 默认base context可用specific context
flatten 只拷贝文件不管文件夹      默认是false
ignore  忽略拷贝指定的文件           可以用模糊匹配
</code></pre></div><p>参考：<a href="https://blog.csdn.net/wbiokr/article/details/73011288" target="_blank" rel="noopener noreferrer">webpack中经典实用的插件copy-webpack-plugin拷贝资源插件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>这个插件主要用于html引入js、css、不需要webpack编译的大文件：</p> <p>如在HTML文件引入JS文件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>zh-CN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./static/js/rem.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我是代码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="webpack一些用法"><a href="#webpack一些用法" aria-hidden="true" class="header-anchor">#</a> webpack一些用法</h2> <h3 id="_1-设置环境变量区分生产环境和开发环境process-env-node-env"><a href="#_1-设置环境变量区分生产环境和开发环境process-env-node-env" aria-hidden="true" class="header-anchor">#</a> 1. 设置环境变量区分生产环境和开发环境process.env.NODE_ENV</h3> <p><a href="https://webpack.docschina.org/guides/production/#%E6%8C%87%E5%AE%9A%E7%8E%AF%E5%A2%83" target="_blank" rel="noopener noreferrer">webpack参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>许多 library 将通过与 <code>process.env.NODE_ENV</code> 环境变量关联，以决定 library 中应该引用哪些内容。例如，当不处于<em>生产环境</em>中时，某些 library 为了使调试变得容易，可能会添加额外的日志记录(log)和测试(test)。其实，当使用 <code>process.env.NODE_ENV === 'production'</code> 时，一些 library 可能针对具体用户的环境进行代码优化，从而删除或添加一些重要代码。我们可以使用 webpack 内置的 <a href="https://webpack.docschina.org/plugins/define-plugin" target="_blank" rel="noopener noreferrer"><code>DefinePlugin</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 为所有的依赖定义这个变量：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    devtool<span class="token punctuation">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">'process.env.NODE_ENV'</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果你正在使用像 <a href="https://doc.react-china.org/" target="_blank" rel="noopener noreferrer"><code>react</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这样的 library，那么在添加此 DefinePlugin 插件后，你应该看到 bundle 大小显著下降。还要注意，任何位于 <code>/src</code> 的本地代码都可以关联到 process.env.NODE_ENV 环境变量，所以以下检查也是有效的：</p> <p><strong>src/index.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> cube <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./math.js'</span><span class="token punctuation">;</span>
 
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Looks like we are in development mode!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'pre'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token string">'Hello webpack!'</span><span class="token punctuation">,</span>
      <span class="token string">'5 cubed is equal to '</span> <span class="token operator">+</span> <span class="token function">cube</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-在webpack中配置mock，访问的api地址在webpack中过滤，使用假数据"><a href="#_2-在webpack中配置mock，访问的api地址在webpack中过滤，使用假数据" aria-hidden="true" class="header-anchor">#</a> 2. 在webpack中配置mock，访问的API地址在webpack中过滤，使用假数据</h3> <p><a href="https://github.com/jaywcjlove/webpack-api-mocker" target="_blank" rel="noopener noreferrer">webpack-api-mocker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>使用webpack的插件，在webpack中配置好后，需要假数据的API就会跳转到假数据的地方访问。</p> <p>参考资料：https://segmentfault.com/a/1190000013220134</p> <p>还有一个：</p> <p><a href="https://github.com/MarxJiao/mock-webpack-plugin/blob/HEAD/readme-zh.md" target="_blank" rel="noopener noreferrer">mock-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_3-webpack本地开发配置api代理解决跨域问题"><a href="#_3-webpack本地开发配置api代理解决跨域问题" aria-hidden="true" class="header-anchor">#</a> 3. webpack本地开发配置API代理解决跨域问题</h3> <p>如果你有单独的后端开发服务器 API，并且希望在同域名下发送 API 请求 ，那么代理某些 URL 会很有用。</p> <p>dev-server 使用了非常强大的 <a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="noopener noreferrer">http-proxy-middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 包。更多高级用法，请查阅其 <a href="https://github.com/chimurai/http-proxy-middleware#options" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>请求到 <code>/api/users</code> 现在会被代理到请求 <code>http://localhost:3000/api/users</code>。</p> <p>如果你不想始终传递 <code>/api</code> ，则需要重写路径：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
        pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'^/api'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>一些比较重要的参数：</p> <ul><li><p>secure: false</p> <p>接受运行在 HTTPS 上，可以使用无效证书的后端服务器</p></li> <li><p>changeOrigin: true</p> <p>如果代理地址是域名，那么需要加上这个配置才能生效，如：www.baidu.com 。否则会失败的。</p></li></ul> <p>https://segmentfault.com/a/1190000016199721</p> <h3 id="_4-import或require时设置路径别名简化引入路径"><a href="#_4-import或require时设置路径别名简化引入路径" aria-hidden="true" class="header-anchor">#</a> 4. import或require时设置路径别名简化引入路径</h3> <p>参考资料：https://webpack.docschina.org/configuration/resolve/</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">,</span> <span class="token string">'.jsx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 解析模块时应该搜索的目录</span>
    modules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'../src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'../node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 创建 import 或 require 的别名，来确保模块引入变得更简单</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        components<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/components'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        utils<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/utils'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        style<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/style'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>主要的参数：</p> <ul><li><p>resolve.extensions</p> <p>自动解析确定的扩展,能够使用户在引入模块时不带扩展,使用此选项，会<strong>覆盖默认数组</strong>，这就意味着 webpack 将不再尝试使用默认扩展来解析模块。对于使用其扩展导入的模块，例如，<code>import SomeFile from &quot;./somefile.ext&quot;</code>，要想正确的解析，一个包含“*”的字符串必须包含在数组中。</p></li> <li><p>resolve.modules</p> <p>告诉 webpack 解析模块时应该搜索的目录.</p> <p>绝对路径和相对路径都能使用，但是要知道它们之间有一点差异。</p> <p>通过查看当前目录以及祖先路径（即 <code>./node_modules</code>, <code>../node_modules</code> 等等），相对路径将类似于 Node 查找 'node_modules' 的方式进行查找。</p> <p>使用绝对路径，将只在给定目录中搜索。</p> <p>如果你想要添加一个目录到模块搜索目录，此目录优先于 <code>node_modules/</code> 搜索:</p> <div class="language- extra-class"><pre class="language-text"><code> modules: [path.resolve(__dirname, 'src'), 'node_modules']
</code></pre></div></li> <li><p>resolve.alias</p> <p>创建 <code>import</code> 或 <code>require</code> 的别名，来确保模块引入变得更简单。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    Utilities<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/utilities/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Templates<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/templates/'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，替换「在导入时使用相对路径」这种方式，就像这样：<code>import Utility from '../../utilities/utility';</code></p> <p>你可以这样使用别名：<code>import Utility from 'Utilities/utility';</code></p> <p>也可以在给定对象的键后的末尾添加 <code>$</code>，以表示精准匹配：</p> <div class="language- extra-class"><pre class="language-text"><code>alias: {
	xyz$: path.resolve(__dirname, 'path/to/file.js')
}
</code></pre></div><p>这将产生以下结果：</p> <p><code>import Test1 from 'xyz'; // 精确匹配，所以 path/to/file.js 被解析和导入</code></p> <p><code>import Test2 from 'xyz/file.js'; // 非精确匹配，触发普通解析</code></p></li></ul> <h3 id="_5-生成的html压缩，删除空格"><a href="#_5-生成的html压缩，删除空格" aria-hidden="true" class="header-anchor">#</a> 5.  生成的HTML压缩，删除空格</h3> <p>主要是HtmlWebpackPlugin插件中加一个参数minify</p> <p>https://github.com/jantimon/html-webpack-plugin</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
    //...
    extensions: ['.js', '.json', '.jsx'],
    // 解析模块时应该搜索的目录
    modules:[resolve('../src'), resolve('../node_modules')],
    plugins: [
        new HtmlWebpackPlugin({ 
          filename: resolve(&quot;/dist/email.html&quot;), 
          template: &quot;./src/email.html&quot;,
          chunks: [&quot;email&quot;],
          minify:{  // 清除HTML的空格
            collapseWhitespace:true
          }
        }),
    ]
};
</code></pre></div><p>minify更多的参数：</p> <div class="language- extra-class"><pre class="language-text"><code>{
  collapseWhitespace: true,
  removeComments: true,
  removeRedundantAttributes: true,
  removeScriptTypeAttributes: true,
  removeStyleLinkTypeAttributes: true,
  useShortDoctype: true
}
</code></pre></div><h2 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h2> <p><a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">webpack官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://doc.webpack-china.org/" target="_blank" rel="noopener noreferrer">webpack中文官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://doc.webpack-china.org/concepts/" target="_blank" rel="noopener noreferrer">webpack概念<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/icewfz/article/details/76640319" target="_blank" rel="noopener noreferrer">Node 环境变量 process.env.NODE_ENV 之webpack应用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/yulilong/front-end-doc/edit/master/doc/tool/001-webpack教程.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/14/2020, 8:22:01 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/170.5ad0f0fe.js" defer></script><script src="/assets/js/app.d18e3cd8.js" defer></script>
  </body>
</html>
